一.服务发现和注册

1.服务发现主要分为

- 客户端发现
- 服务端发现

2.服务注册：通过heartbeat机制定时刷新

**客户端发现**：客户端通过查询服务注册中心，获取可用的服务实际网络地址和IP。然后通过负载均衡算法来选择一个可用的服务实例，并将请求发送至该服务。

优点：客户端可以知道所有可用的服务的实际网络地址，所以可以非常方便的实现负载均衡功能（如：一致性哈希）

缺点：强耦合性。针对不同的语言，每个服务的客户端都得实现一套服务发现的功能

**服务端发现：**客户端向load balancer发送请求。load balancer查询服务注册中心找到可用的服务，然后转发请求到该服务器上。（AWS弹性负载均衡就是服务端发现的一个例子）

优点：**服务的发现逻辑对于客户端是透明的**。客户端只需要向load balancer发送请求就可以了，避免了每种不同语言的客户端实现一套发现的逻辑

缺点：关心负载均衡组件的高可用性

**共同点：**服务都需要到服务注册中心注册和销毁

3.服务注册中心（提供了API查询当前可用的服务实例信息）

服务发现的核心。它保存了各个可用服务实例的网络地址（IP和Port）。服务注册中心必须要有高可用性和实时更新功能

4.服务注册方式：1.自己注册（耦合度比较高） 2.第三方注册（要考虑组件的高可用性，解除了服务注册中心的耦合性）



二.常见的服务发现框架

Consul,Zookeeper,Eureka,Nacos







